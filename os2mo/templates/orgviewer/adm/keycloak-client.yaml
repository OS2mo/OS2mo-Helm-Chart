# SPDX-FileCopyrightText: Magenta ApS
# SPDX-License-Identifier: MPL-2.0
---
{{- if .Values.orgviewer.adm.enabled }}
{{- $name := "orgviewer-adm" -}}
{{ include "os2mo.keycloak-client" (dict "name" $name "Release" .Release ) }}
  varsFrom:
    - kind: Secret
      name: {{ include "os2mo.keycloak_admin_secret" . }}
  vars:
    - name: client_name
      value: {{ $name }}
    - name: client_roles
      value:
        - reader
  writeOutputsToSecret:
    name: {{ $name }}-keycloak-client
    outputs:
      - client_secret
{{- end }}
